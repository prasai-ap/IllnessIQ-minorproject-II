{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>IllnessIQ Dashboard</title>
  <link rel="stylesheet" href="{% static 'css/userdash.css' %}" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@500;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <nav class="navbar">
    <div class="logo">
      <a href="{% url 'index'%}">
      <img src="{% static 'images/logo.png' %}" alt="IllnessIQ Logo">
      </a>
    </div>
    <div class="dropdown">
        <button class="dropdown-toggle" id="dropdownBtn">ðŸ‘¤</button>
        <ul class="dropdown-menu" id="dropdownMenu">
          <li><a href="{% url 'history' %}">History</a></li>
          <li><a href="{% url 'feedback' %}">Feedback</a></li>
          <li><a href="{% url 'report_issue' %}">Report Issue</a></li>
          <li><a href="{% url 'logout' %}">Logout</a></li>
        </ul>
    </div>
  </nav>

  <main class="dashboard">
    <h1>Welcome! Choose which risk would you like to predict:</h1>
    
    <div class="card-container">
      <a href="{% url 'diabetes_risk' %}" class="card card-diabetes">
        <img src="{% static 'images/diabetes.jpg' %}" alt="Diabetes" />
        <p>Diabetes Prediction</p>
      </a>
      <a href="{% url 'heart_risk' %}" class="card card-heart">
        <img src="{% static 'images/heart.jpg' %}" alt="Heart Disease" />
        <p>Heart Disease Prediction</p>
      </a>
      <a href="{% url 'liver_risk' %}" class="card card-liver">
        <img src="{% static 'images/liver.jpeg' %}" alt="Liver Disease" />
        <p>Liver Disease Prediction</p>
      </a>
      <a href="{% url 'thyroid_risk' %}" class="card card-thyroid">
        <img src="{% static 'images/thyroid.jpg' %}" alt="Thyroid Disease" />
        <p>Thyroid Disease Prediction</p>
      </a>
    </div>    

    <section class="recent-activity">
      <h2>Recent Activity</h2>
      {% if recent_activities %}
        <ul class="activity-list">
          {% for act in recent_activities %}
            <li>
              <strong>{{ act.entry_date|date:"M d, Y" }}</strong> â€“ 
              <em>{{ act.disease }}</em> test for <b>{{ act.patient_name }}</b>: 
              <span>{{ act.risk_status }}</span>
            </li>
          {% endfor %}
        </ul>
      {% else %}
        <p>No recent activity found.</p>
      {% endif %}
    </section>
  </main>

  <script>
    const dropdownBtn = document.getElementById('dropdownBtn');
    const dropdownMenu = document.getElementById('dropdownMenu');

    dropdownBtn.addEventListener('click', () => {
      dropdownMenu.classList.toggle('show');
    });

    window.addEventListener('click', (e) => {
      if (!dropdownBtn.contains(e.target) && !dropdownMenu.contains(e.target)) {
        dropdownMenu.classList.remove('show');
      }
    });
  </script>
  <footer class="footer">
    <div class="footer-container">
      <p>&copy; 2025 <strong>IllnessIQ</strong>. All rights reserved.</p>
    </div>
  </footer>
</body>
</html>
